auca_database=# CREATE TABLE employees (
    employee_id SERIAL PRIMARY KEY,
    first_name VARCHAR(50),
    last_name VARCHAR(50),
    department VARCHAR(100),
    email VARCHAR(100),
    salary DECIMAL(10,2)
);

CREATE TABLE customers (
    customer_id SERIAL PRIMARY KEY,
    name VARCHAR(100),
    email VARCHAR(100)
);

CREATE TABLE products (
    product_id SERIAL PRIMARY KEY,
    name VARCHAR(100),
    price DECIMAL(10,2),
    created_at DATE DEFAULT CURRENT_DATE
);

CREATE TABLE orders (
    order_id SERIAL PRIMARY KEY,
    customer_id INTEGER REFERENCES customers(customer_id),
    order_date DATE DEFAULT CURRENT_DATE,
    total DECIMAL(10,2)
);

CREATE TABLE sales_data (
    sale_id SERIAL PRIMARY KEY,
    product_name VARCHAR(100),
    quantity INTEGER,
    sale_date DATE,
    revenue DECIMAL(10,2)
);

CREATE TABLE customer_feedback (
    feedback_id SERIAL PRIMARY KEY,
    customer_id INTEGER REFERENCES customers(customer_id),
    feedback TEXT,
    rating INTEGER
);

-- Для ETL/миграции
CREATE TABLE staging_customers (
    customer_id SERIAL PRIMARY KEY,
    name VARCHAR(100),
    email VARCHAR(100)
);

CREATE TABLE target_customers (
    customer_id SERIAL PRIMARY KEY,
    name VARCHAR(100),
    email VARCHAR(100)
);
CREATE TABLE
CREATE TABLE
CREATE TABLE
CREATE TABLE
CREATE TABLE
CREATE TABLE
CREATE TABLE
CREATE TABLE
auca_database=# \dt
             List of relations
 Schema |       Name        | Type  | Owner
--------+-------------------+-------+-------
 public | customer_feedback | table | arsen
 public | customers         | table | arsen
 public | employees         | table | arsen
 public | orders            | table | arsen
 public | products          | table | arsen
 public | sales_data        | table | arsen
 public | staging_customers | table | arsen
 public | target_customers  | table | arsen
(8 rows)

auca_database=# COPY employees(first_name, last_name, email)
FROM '/tmp/new_employees.csv' WITH CSV HEADER;
ERROR:  could not open file "/tmp/new_employees.csv" for reading: No such file or directory
auca_database=# INSERT INTO employees (first_name, last_name, department, email, salary) VALUES
('Alice', 'Brown', 'IT', 'alice@company.com', 95000),
('Bob', 'Smith', 'HR', 'bob@company.com', 70000),
('Charlie', 'Davis', 'Sales', 'charlie@company.com', 85000);

INSERT INTO customers (name, email) VALUES
('Aibek', 'aibek@email.com'),
('Ainura', 'ainura@email.com'),
('Bakyt', 'bakyt@email.com');

INSERT INTO products (name, price) VALUES
('Laptop', 1200.00),
('Phone', 800.00),
('Headphones', 150.00);

INSERT INTO orders (customer_id, total) VALUES
(1, 2000.00),
(2, 800.00),
(3, 300.00);

INSERT INTO sales_data (product_name, quantity, sale_date, revenue) VALUES
('Laptop', 5, '2024-03-01', 6000.00),
('Phone', 8, '2024-03-05', 6400.00),
('Headphones', 10, '2024-03-10', 1500.00);

INSERT INTO customer_feedback (customer_id, feedback, rating) VALUES
(1, 'Great service, fast delivery!', 5),
(2, 'Product was fine, but shipping delayed.', 3),
(3, 'Excellent experience overall.', 5);
INSERT 0 3
INSERT 0 3
INSERT 0 3
INSERT 0 3
INSERT 0 3
INSERT 0 3
auca_database=# CREATE TABLE staging_customers AS SELECT * FROM customers WHERE 1=0;
ERROR:  relation "staging_customers" already exists
auca_database=# COPY (SELECT * FROM customers LIMIT 10000 OFFSET 0)
TO '/tmp/customers_batch_1.csv' WITH CSV HEADER;
COPY 3
auca_database=# COPY staging_customers FROM '/tmp/customers_batch_1.csv' WITH CSV HEADER;
COPY 3
auca_database=# INSERT INTO target_customers
SELECT * FROM staging_customers
ON CONFLICT (customer_id) DO UPDATE SET ...;
ERROR:  syntax error at or near ".."
LINE 3: ON CONFLICT (customer_id) DO UPDATE SET ...;
                                                ^
auca_database=# SELECT COUNT(*) FROM source_table;
ERROR:  relation "source_table" does not exist
LINE 1: SELECT COUNT(*) FROM source_table;
                             ^
auca_database=# SELECT COUNT(*) FROM source_table;
ERROR:  relation "source_table" does not exist
LINE 1: SELECT COUNT(*) FROM source_table;
                             ^
auca_database=# SELECT pid, usename, application_name, client_addr, state
FROM pg_stat_activity
WHERE application_name = 'pg_dump';
 pid | usename | application_name | client_addr | state
-----+---------+------------------+-------------+-------
(0 rows)

auca_database=# CREATE TABLE large_table_2023 PARTITION OF large_table
FOR VALUES FROM ('2023-01-01') TO ('2024-01-01');
ERROR:  relation "large_table" does not exist
auca_database=#